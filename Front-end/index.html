<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="viewport" content="IE=edge,chrome=1" />
    <title>Cricket Analysis and Win Predictor</title>
    <link rel="cricket icon" href="img/cricket.png" type="image/x-icon"/>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />

    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/bootstrap-theme.min.css" />
    <link rel="stylesheet" href="css/fontAwesome.css" />
    <link rel="stylesheet" href="css/light-box.css" />
    <link rel="stylesheet" href="css/owl-carousel.css" />
    <link rel="stylesheet" href="css/templatemo-style.css" />

    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800"
      rel="stylesheet"
    />

    <script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
  </head>

  <body>
    <header class="nav-down responsive-nav hidden-lg hidden-md">
      <button
        type="button"
        id="nav-toggle"
        class="navbar-toggle"
        data-toggle="collapse"
        data-target="#main-nav"
      >
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <!--/.navbar-header-->
      <div id="main-nav" class="collapse navbar-collapse">
        <nav>
          <ul class="nav navbar-nav">
            <li><a href="#top">Home</a></li>
            <li><a href="#featured">Featured</a></li>
          </ul>
        </nav>
      </div>
    </header>

    

    <div class="slider">
      <div class="Modern-Slider content-section" id="top">
        <!-- Item -->
        <div class="item item-1">
          <div class="img-fill">
            <div class="image"></div>
            <div class="info">
              <div>
                <h1>Cricket Analysis<br />Project</h1>
                <h4 style="color:white;">
                  Cricket Analysis is an elegant website that gives the analysis and Prediction.<br />
                </h4>
                <div class="white-button button">
                  <a href="#featured">Discover More</a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- // Item -->
        <!-- Item -->
        <div class="item item-2">
          <div class="img-fill">
            <div class="image"></div>
            <div class="info">
              <div>
                

                <div class="white-button button">
                  <a href="#featured">Discover More</a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- // Item -->
        <!-- Item -->
        <div class="item item-3">
          <div class="img-fill">
            <div class="image"></div>
            <div class="info">
            </div>
          </div>
        </div>
        <!-- // Item -->
      </div>
    </div>
    

    <center>
    <div class="page-content">
      <section id="featured" class="content-section">
        <div class="section-heading">
          
          
        </div>
        <div class="section-content">
          <div class="owl-carousel owl-theme">
            
            <div class="item">
              <div class="image">
                <img src="img/batsman.jpg" alt="" />
                <div class="featured-button button">
                  <a href="templates/t20.html">Predict</a>
                </div>
              </div>
              <div class="text-content">
                <h4>T20 Match Prediction</h4>
               
               
              </div>
            </div>
            <div class="item">
              <div class="image">
                <img src="img/bowler-1.jpg" alt="" />
                <div class="featured-button button">
                  <a href="templates/ipl.html">Predict</a>
                </div>
              </div>
              <div class="text-content">
                <h4>IPL Match Prediction</h4>
               
              </div>
            </div>
            
              
            <div class="item">
              <div class="image">
                <img src="img/result.jpg" alt="" />
                <div class="featured-button button">
                  <a href="templates/odi.html">Predict</a>
                </div>
              </div>
              <div class="text-content">
                <h4>ODI Match Prediction</h4>
                
              </div>
            </div>
          
            
     
        
     
    </div>
  </center>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script>
      window.jQuery ||
        document.write(
          '<script src="js/vendor/jquery-1.11.2.min.js"><\/script>'
        );
    </script>

    <script src="js/vendor/bootstrap.min.js"></script>

    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>

    <script>
      // Hide Header on on scroll down
      var didScroll;
      var lastScrollTop = 0;
      var delta = 5;
      var navbarHeight = $("header").outerHeight();

      $(window).scroll(function (event) {
        didScroll = true;
      });

      setInterval(function () {
        if (didScroll) {
          hasScrolled();
          didScroll = false;
        }
      }, 250);

      function hasScrolled() {
        var st = $(this).scrollTop();

        // Make sure they scroll more than delta
        if (Math.abs(lastScrollTop - st) <= delta) return;

        // If they scrolled down and are past the navbar, add class .nav-up.
        // This is necessary so you never see what is "behind" the navbar.
        if (st > lastScrollTop && st > navbarHeight) {
          // Scroll Down
          $("header").removeClass("nav-down").addClass("nav-up");
        } else {
          // Scroll Up
          if (st + $(window).height() < $(document).height()) {
            $("header").removeClass("nav-up").addClass("nav-down");
          }
        }

        lastScrollTop = st;
      }
    </script>
    <script>
      const teams = {
          'ipl': ["Chennai Super Kings", "Mumbai Indians", "Kolkata Knight Riders", "Royal Challengers Bangalore", "Sunrisers Hyderabad", "Delhi Capitals"],
          'odi': ["India", "England", "New Zealand", "Australia", "Sri Lanka", "South Africa", "Bangladesh", "Pakistan", "Afghanistan", "Netherlands"],
          't20': ["India", "England", "New Zealand", "Australia", "Sri Lanka", "South Africa", "Bangladesh", "Pakistan", "Afghanistan", "Netherlands"]
      };

      const cities = {
          'ipl': ["Mumbai", "Delhi", "Kolkata", "Bangalore", "Hyderabad", "Chennai"],
          'odi': ["Dhaka", "London", "Sydney", "Mumbai", "Delhi", "Kolkata", "Bangalore", "Dubai", "Sharjah", "Johannesburg"],
          't20': ["Dhaka", "London", "Sydney", "Mumbai", "Delhi", "Kolkata", "Bangalore", "Dubai", "Sharjah", "Johannesburg"]
      };

      function updateDropdowns() {
          let matchType = document.getElementById("matchType").value;
          let battingDropdown = document.getElementById("battingTeam");
          let bowlingDropdown = document.getElementById("bowlingTeam");
          let cityDropdown = document.getElementById("city");
          
          battingDropdown.innerHTML = "";
          bowlingDropdown.innerHTML = "";
          cityDropdown.innerHTML = "";
          
          teams[matchType].forEach(team => {
              battingDropdown.innerHTML += `<option value="${team}">${team}</option>`;
              bowlingDropdown.innerHTML += `<option value="${team}">${team}</option>`;
          });
          
          cities[matchType].forEach(city => {
              cityDropdown.innerHTML += `<option value="${city}">${city}</option>`;
          });
      }

      function predictWin() {
          let matchType = document.getElementById("matchType").value;
           
          let endpoint;
          if (matchType === "ipl") {
              endpoint = "/predict/ipl";
          } else if (matchType === "odi") {
              endpoint = "/predict/odi";
          } else {
              endpoint = "/predict/t20";  // Added T20 match support
          }

          let data = {
              batting_team: document.getElementById("battingTeam").value,
              bowling_team: document.getElementById("bowlingTeam").value,
              city: document.getElementById("city").value,
              target: parseInt(document.getElementById("target").value),
              score: parseInt(document.getElementById("score").value),
              overs: parseInt(document.getElementById("overs").value),
              wickets: parseInt(document.getElementById("wickets").value)
          };

          fetch(`http://127.0.0.1:5000${endpoint}`, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(data)
          })
          .then(response => response.json())
          .then(result => {
              if (result.error) {
                  document.getElementById("result").innerText = "Error: " + result.error;
              } else {
                  document.getElementById("result").innerText = `${data.batting_team} Win Probability: ${result.win_prob}% | ${data.bowling_team} Win Probability: ${result.loss_prob}%`;
              }
          })
          .catch(error => {
              console.error("Error:", error);
              document.getElementById("result").innerText = "Error connecting to server.";
          });
      }

      document.getElementById("matchType").addEventListener("change", updateDropdowns);
      window.onload = updateDropdowns;
  </script>
  </body>
</html>
